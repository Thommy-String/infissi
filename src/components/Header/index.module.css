:root{
  --nav-h: 44px;            /* Apple-like height */
  --nav-bg: rgba(22,22,23,.8);
  --nav-blur: saturate(180%) blur(10px);
  --text: #f5f5f7;
  --muted: #a1a1a6;
  --border: rgba(255,255,255,.08);
  --flyout-bg: #fafafc;
  --flyout-shadow: 0 20px 40px rgba(0,0,0,.35);
  --ease-spring: cubic-bezier(.22,1,.36,1);   /* bouncy but subtle */
  --ease-soft:   cubic-bezier(.2,.8,.2,1);    /* smooth */
  --ease-elegant: cubic-bezier(.16,.84,.24,1.02); /* slower, fluid desktop */
  --flyout-card-min: 250px; /* unified min-height for flyout cards */
}

html, body { width: 100%; }

.header { position: sticky; top: 0; z-index: 70; }
.nav {
  backdrop-filter: var(--nav-blur);
  -webkit-backdrop-filter: var(--nav-blur);
  background: #fafafc !important;
  height: var(--nav-h);
  display: grid;
  grid-template-columns: 1fr auto 1fr;
  align-items: center;
  padding: 0 12px;
}

@media (max-width: 1024px) {
  .nav {
    display: flex;                   /* override grid on mobile */
    align-items: center;
    justify-content: space-between;  /* brand at left, burger at far right */
    padding: 0 12px;                 /* keep same horizontal padding */
  }
  .left { order: 1; }
  .menu { display: none; }           /* ensure center menu is hidden */
  .burger {
    order: 3;
    margin-left: auto;               /* push completely to the right */
    width: 10px;                     /* larger tap target */
    height: 10px;
  }
}

.left { display: flex; align-items: center; gap: 8px; }
.brand {
  color: var(--text);
  text-decoration: none;
  font-size: 14px;
  letter-spacing: .02em;
  font-weight: 600;
}

.logo {
  height: 18px;            /* smaller height */
  margin-left: 8px;        /* small left margin */
  width: auto;
  display: block;
}

/* Desktop menu */
.menu {
  list-style: none;
  display: none;
  gap: 28px;
  justify-content: center;
  align-items: center;
}
@media (min-width: 1025px) {
  .menu { display: flex; }
}

.menuItem { position: relative; }
.menuLink {
  font-size: 12px;
  font-weight: 400;
  letter-spacing: -0.01em;
  color: rgba(0, 0, 0, .8);
  background: transparent;
  border: 0;
  padding: 6px 4px;
  cursor: pointer;
}
.menuLink:hover, .menuLink:focus { opacity: 1; }

/* Flyout */
.flyout {
  position: fixed;
  top: var(--nav-h);
  left: 0;
  right: 0;
  width: 100vw;
  max-width: 100vw;
  margin: 0;
  background: var(--flyout-bg);
  border: 1px solid var(--border);
  box-shadow: var(--flyout-shadow);
  opacity: 0;
  pointer-events: none;
  z-index: 49; /* sits under .header (50) but above page content */
  /* Desktop animation base (same spirit as mobile drawer) */
  transform: translateY(-10px) scale(.985);
  transition: opacity .34s var(--ease-spring), transform .34s var(--ease-spring);
  padding: 20px;
  will-change: opacity, transform;
}
.flyoutOpen {
  opacity: 1;
  transform: translateY(0) scale(1);
  filter: none;
  pointer-events: auto;
}
/* Desktop flyout — staged reveal for each item */
.flyoutOpen .flyoutList > .flyoutItem { animation: flyIn .42s var(--ease-spring) both; }
.flyoutOpen .flyoutList > .flyoutItem:nth-child(1){ animation-delay: .02s; }
.flyoutOpen .flyoutList > .flyoutItem:nth-child(2){ animation-delay: .06s; }
.flyoutOpen .flyoutList > .flyoutItem:nth-child(3){ animation-delay: .10s; }
.flyoutOpen .flyoutList > .flyoutItem:nth-child(4){ animation-delay: .14s; }
.flyoutOpen .flyoutList > .flyoutItem:nth-child(5){ animation-delay: .18s; }
.flyoutOpen .flyoutList > .flyoutItem:nth-child(6){ animation-delay: .22s; }
.flyoutOpen .flyoutList > .flyoutItem:nth-child(7){ animation-delay: .26s; }
.flyoutOpen .flyoutList > .flyoutItem:nth-child(8){ animation-delay: .30s; }
.flyoutOpen .flyoutList > .flyoutItem:nth-child(9){ animation-delay: .34s; }
.flyoutOpen .flyoutList > .flyoutItem:nth-child(10){ animation-delay: .38s; }

.flyoutList {
  list-style: none;
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 14px 18px;
  align-items: stretch;
}
.flyoutItem {
  border-radius: 10px;
  background-color: white;
  overflow: hidden;
  box-shadow: 2px 4px 12px #00000014;
}
.flyoutLink {
  display: grid;
  gap: 2px;
  padding: 14px 16px;
  border-radius: 10px;
  text-decoration: none;
  color: #000;
  background: transparent;
  transition: background .18s ease, transform .12s ease;
  align-items: start;
  justify-items: start;
  height: 100%;                 /* stretch to equalize height */
}

/* 1×2 layout inside each flyout item: text (2fr) + media (1fr) */
.flyoutContent {
  display: grid;
  grid-template-columns: 1fr 1fr;
  align-items: center;
  gap: 0px;
  min-height: var(--flyout-card-min);
}

/* ===== Simple (text-only) variant — used for Nuova/Sostituzione/Riparazione ===== */
.flyoutItemSimple {}

/* Apply when you render <li className={`${styles.flyoutItem} ${styles.flyoutItemSimple}`}> */
.flyoutItemSimple .flyoutLink,
.flyoutLinkSimple {
  display: grid;
  grid-template-columns: 1fr;
  gap: 6px;
  padding: 14px 16px;            /* same rhythm as default */
  align-items: center;
  justify-items: start;
  height: 100%;
}

.flyoutItemSimple .flyoutContent,
.flyoutTextOnly {
  display: grid;                     /* stack title + meta vertically */
  align-content: center;             /* vertical centering */
  min-height: var(--flyout-card-min);
  text-wrap: pretty;
}

/* Hide media area completely for simple items */
.flyoutItemSimple .flyoutMedia { display: none; }

/* Typography stays big and clean */
.flyoutItemSimple .flyoutTitle { font-size: 28px; font-weight: 600; line-height: 1.15; }
.flyoutItemSimple .flyoutMeta  { font-size: 14px; line-height: 1.35; }

.flyoutText { display: grid; gap: 6px; }
.flyoutMedia {
  width: 100%;
  height: 100%;            /* fill available card height */
  aspect-ratio: auto;      /* let height control the sizing */
  border-radius: 10px;
  overflow: hidden;
  background: linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.02));
  border: 1px solid var(--border);
}
.flyoutImage {
  width: 100%;
  height: 100%;
  object-fit: contain;
  display: block;
}

.flyoutLink:hover { background: rgba(0,0,0,.04); }
.flyoutTitle {
  color: #000;
  display: block;
  font-size: 28px;
  font-weight: 600;
  line-height: 1.15;
  transform-origin: left center;  /* nicer scale on hover */
  overflow-wrap: anywhere;
}

.flyoutMeta { display: block; font-size: 14px; color: var(--muted); line-height: 1.35; }

/* Burger (mobile) */
/* Burger (mobile) */
.burger {
  position: relative;
  justify-self: end;
  width: 18px;
  height: 14px;
  background: transparent;
  border: 0;
  cursor: pointer;
  display: block; /* we handle bars with absolute spans */
}
.burger span {
  position: absolute;
  left: 0; right: 0;
  height: 1.5px;
  background: #000;
  opacity: .55;
  border-radius: 20px;
  transition: transform .28s var(--ease-soft), opacity .2s var(--ease-soft), top .28s var(--ease-soft);
}
.burger span:nth-child(1) { top: 0; }
.burger span:nth-child(2) { top: 6px; }
.burger span:nth-child(3) { top: 12px; }

/* When drawer is open, morph into an “X” */
.burgerOpen span:nth-child(1) { top: 7px; transform: rotate(45deg); }
.burgerOpen span:nth-child(2) { opacity: 0; }
.burgerOpen span:nth-child(3) { top: 7px; transform: rotate(-45deg); }
@media (min-width: 1025px) { .burger { display: none; } }

/* Drawer mobile */
.drawer {
  position: fixed;
  top: var(--nav-h); left: 0; right: 0;
  height: calc(100dvh - var(--nav-h));
  background: #fafafc;
  transform: translateY(-10px) scale(.985);
  opacity: 0; pointer-events: none;
  transition: opacity .34s var(--ease-spring), transform .34s var(--ease-spring);
  overflow-y: auto;
  overflow-x: hidden; /* prevent horizontal scroll */
  z-index: 58;
  -webkit-overflow-scrolling: touch;
  touch-action: manipulation;
}
@supports (overflow: clip) {
    .drawer { overflow-x: clip; }
  }
.drawerOpen { 
  transform: translateY(0) scale(1); 
  opacity: 1; 
  pointer-events: auto; 
}

/* Stagger reveal of top-level groups inside the drawer */
/* Stagger reveal of top-level groups inside the drawer using CSS variable for delay */
.drawerOpen .drawerList > .group {
  animation: flyIn .42s var(--ease-spring) both;
  animation-delay: calc(var(--i, 0) * 60ms);
}

/* ===== Mobile drawer — Apple‑like scale & rhythm ===== */
@media (max-width: 1024px) {
  /* Big, comfy tap targets */
  .drawerList { padding: 28px 24px 40px 24px; gap: 0; }

 
  .group:last-child { border-bottom: 0; }

  .groupToggle {
    padding: 22px 0;                /* vertical rhythm */
    font-size: clamp(28px, 7vw, 42px);
    font-weight: 700;
    letter-spacing: -0.01em;
    cursor: pointer;
    -webkit-tap-highlight-color: transparent;
  }

  .chev { width: 18px; height: 18px; opacity: .1; }
  .chevOpen { transform: rotate(180deg); }

  /* Collapsible area spacing */
  .groupListOpen { max-height: 700px; padding: 0px 32px; }

  /* Sub‑items */
  /* Smaller titles for flyout items inside the mobile drawer */
  .drawer .flyoutTitle {
    font-size: 20px;
    line-height: 1.2;
    font-weight: 600;
  }
  .groupLink {
    display: grid;
    grid-template-columns: auto 1fr; /* auto si adatta se c'è thumb, se non c'è tutto va a sx */
    align-items: center;
    column-gap: 12px;
    padding: 16px 4px 18px 4px;
    min-height: 72px;
  }

  .groupThumb {
    width: 56px;
    height: 56px;
    border-radius: 10px;
    overflow: hidden;
    background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
    border: 1px solid var(--border);
    display: block;
    flex: 0 0 56px;
  }
  .groupThumbImg {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
  }

  /* Stack title + meta vertically next to the thumb */
  .groupText { display: grid; gap: 4px; min-width: 0; }

  .groupMeta { font-size: 12px; opacity: .85; }
}

/* Close button (for JSX element you will add) */
.drawerClose {
  position: fixed; top: 10px; right: 12px; z-index: 60;
  width: 36px; height: 36px;
  display: grid; place-items: center;
  background: transparent; border: 0; cursor: pointer;
}
.drawerClose:focus-visible { outline: 2px solid rgba(255,255,255,.6); outline-offset: 2px; border-radius: 8px; }

.drawerList { list-style: none; padding: 48px 0px 0px 0px; display: grid; gap: 6px; position: relative; }

.groupToggle {
  width: 100%; text-align: left;
  color: #000; background: transparent; border: 0; padding: 2px 32px;
  font-size: 26px; letter-spacing: .01em; display:flex; justify-content: start; align-items:center; gap: 8px;
}
.chev { transition: transform .26s var(--ease-spring); opacity: .1; }
.chevOpen { transform: rotate(180deg); }

.groupList {
  display: grid; gap: 2px;
  max-height: 0; overflow: hidden;
  opacity: 0; transform: translateY(-4px);
  transition: max-height .34s var(--ease-soft), opacity .24s var(--ease-soft), transform .24s var(--ease-soft);
  will-change: max-height, opacity, transform;
}
.groupListOpen { 
  max-height: 700px; 
  opacity: 1; 
  transform: none; 
}
.groupListOpen .groupItem { animation: itemIn .26s var(--ease-soft) both; }
.groupListOpen .groupItem:nth-child(1){ animation-delay: .02s; }
.groupListOpen .groupItem:nth-child(2){ animation-delay: .06s; }
.groupListOpen .groupItem:nth-child(3){ animation-delay: .10s; }
.groupListOpen .groupItem:nth-child(4){ animation-delay: .14s; }
.groupListOpen .groupItem:nth-child(5){ animation-delay: .18s; }
.groupListOpen .groupItem:nth-child(6){ animation-delay: .22s; }
.groupListOpen .groupItem:nth-child(7){ animation-delay: .26s; }


.groupItem { }
.groupLink {
  display: grid;
  grid-template-columns: 56px 1fr;   /* unified two-column layout for drawer items */
  align-items: center;
  column-gap: 12px;
  padding: 16px 6px 18px 6px;
  text-decoration: none; color: var(--text); opacity: .95;
  cursor: pointer;
  -webkit-tap-highlight-color: transparent;
  pointer-events: auto;
  min-height: 72px;
}
/* Reserve slot for items without images as well outside the media block */
.noThumb .groupThumb {
  background: transparent;
  border: 0;
}
.noThumb .groupThumb::before {
  content: "";
  display: block;
  width: 100%;
  height: 100%;
}

.groupMeta {
    color: var(--muted);
    font-size: 12px;
    max-width: 100%;           /* keep within container */
    overflow-wrap: anywhere;    /* break long strings if needed */
  }

/* Backdrop */
.backdrop {
  position: fixed; 
  left: 0;
  right: 0;
  bottom: 0;
  top: var(--nav-h);
  background: rgba(0,0,0,.25);
  opacity: 0; pointer-events: none;
  transition: opacity .2s ease;
  border: 0;
  z-index: 54;
}
.backdropShow { opacity: 1; pointer-events: auto; }

@keyframes flyIn { 
  from { opacity: 0; transform: translateY(8px); } 
  to   { opacity: 1; transform: translateY(0); } 
}

@keyframes itemIn { 
  from { opacity: 0; transform: translateY(6px); } 
  to   { opacity: 1; transform: translateY(0); } 
}

/* ===== Desktop — slower, more elegant motion ===== */
@media (min-width: 1025px) {
  /* Softer, longer entrance for the whole flyout */
  .flyout {
    /* slightly more distance at start for a velvet feel (no blur) */
   
    transition: opacity .56s var(--ease-elegant),
                transform .56s var(--ease-elegant);
  }

  /* Stagger a bit slower; override earlier rules by re‑declaring */
  .flyoutOpen .flyoutList > .flyoutItem { animation: flyIn .60s var(--ease-elegant) both; }
  .flyoutOpen .flyoutList > .flyoutItem:nth-child(1){ animation-delay: .06s; }
  .flyoutOpen .flyoutList > .flyoutItem:nth-child(2){ animation-delay: .10s; }
  .flyoutOpen .flyoutList > .flyoutItem:nth-child(3){ animation-delay: .14s; }
  .flyoutOpen .flyoutList > .flyoutItem:nth-child(4){ animation-delay: .18s; }
  .flyoutOpen .flyoutList > .flyoutItem:nth-child(5){ animation-delay: .22s; }
  .flyoutOpen .flyoutList > .flyoutItem:nth-child(6){ animation-delay: .26s; }
  .flyoutOpen .flyoutList > .flyoutItem:nth-child(7){ animation-delay: .30s; }
  .flyoutOpen .flyoutList > .flyoutItem:nth-child(8){ animation-delay: .34s; }
  .flyoutOpen .flyoutList > .flyoutItem:nth-child(9){ animation-delay: .38s; }
  .flyoutOpen .flyoutList > .flyoutItem:nth-child(10){ animation-delay: .42s; }

  /* Hover scale of titles eased and slightly slower for elegance */
  
  /* Make desktop flyout items equal height and slightly smaller */
  .flyout { 
    /* shrink card height a bit only on desktop */
    --flyout-card-min: 230px; 
  }

  /* Force equal card heights per grid row */
  .flyoutList {
    grid-auto-rows: var(--flyout-card-min);
  }
  .flyoutLink { height: 100%; }
  .flyoutContent { min-height: var(--flyout-card-min); height: 100%; }

  /* Slightly tighter padding for desktop cards */
  .flyoutLink {
    padding: 12px 38px;
  }

  /* Slightly smaller titles on desktop */
  .flyoutTitle {
    font-size: 28px;
  }

  /* Keep the simple items visually aligned with same height */
  .flyoutItemSimple .flyoutLink,
  .flyoutLinkSimple {
    padding: 12px 38px;
  }
  .flyoutItemSimple .flyoutTitle { font-size: 28px; }
}

/* Respect users that prefer reduced motion */
@media (prefers-reduced-motion: reduce) {
  .flyout, .drawer { transition-duration: .01ms !important; filter: none !important; transform: none !important; }
  .flyoutOpen .flyoutList > .flyoutItem, .drawerOpen .drawerList > .group { animation: none !important; }
}